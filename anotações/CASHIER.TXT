O laravel cashier stripe oferece um grupo de funcionalidades para lidar com pagamento
e gerenciamento de planos, ao instalr o cashier ele tambem traz o stripe.

STRIPE 
  tem varios serviços de cobrança, implantados

CASHIER 
  oferece a interface qua facilita lidar com esses serviços

Embora venham juntos na instalação eles são 2 coisas diferentes 

link da doc "https://laravel.com/docs/12.x/billing"

intalando o stripe 
 composer require laravel/cashier

Apos executar esse comando: " php artisan vendor:publish --tag="cashier-migrations "

O stripe traz algumas migrations depois que executa-las na atebla de usuario seram 
adicionados alguns campos mas o foco deve ser nesses 

1 - stripe_id -> e a identificação do cliente no ambiente stripe
2 - pm_type   -> é o tipo de pagamentoi que cliente vai usar parar apgar pelo plano dele 
3 - pm_last_for -> esse campo contem os 4 ulimos digitos do cartão de crédito do cliente 
4 - trial_ends_at -> é a quantidade de dias de teste do plano caso eu tenha uma assinatura onde o cliente possa testar 

Criando o arquivo de configurações parara o cashier

 php artisan vendor:publish --tag="cashier-config"

Para usar esse serviços eu fiz uma conta no stripe que seria o hub que fornce esses serviçõs de pagamento
na dashboard tem uma area chemada dessenvolvedores e eu tenho que clicar na opção "workbench" 
nessa pagina eu consigo ver o historico de erros na api  e  consigo ver tambem as minhas chaves de teste 

no workbench aparecem 2 informações importantes de integração 

1 -chave publicavel 
2 -chave secreta 

e nas configurações do cashier tem 2 espaços para preecher esses dados 
no primeiro espaço fica a chave pulica e na segunda a chave secreta 

 'key' => env('STRIPE_KEY'),

 'secret' => env('STRIPE_SECRET'),

depois de colocfar essas chaves na palicação a proxima etapa e dapatar o model 
de usuários para lidar com isso, para a configurar eu tenho que adicionar um trate 
na classe do model.

TRATE 
 é um conjunto de funcionalidades quq vem inclusas em um arquivo é como se um trate 
 fosse uma contate que representa uma conjunto de metodos, o trate que eu vou adcionar 
 se chama Billable é um trate que só existe se o cashier estiver instalado.

 colcando ele no model eu não preciso saber como a api do cashier funciona eu so preciso
 chamar os metodos e colocar os parametros.



Model com o Billable instalado
--------------------------------------------------------------------------------------
class User extends Authenticatable
{
    /** @use HasFactory<\Database\Factories\UserFactory> */
    use HasFactory, Notifiable,Billable;

    /**
     * The attributes that are mass assignable.
     *
     * @var list<string>
     */
    protected $fillable = [
        'name',
        'email',
        'password',
    ];

    /**
     * The attributes that should be hidden for serialization.
     *
     * @var list<string>
     */
    protected $hidden = [
        'password',
        'remember_token',
    ];

    /**
     * Get the attributes that should be cast.
     *
     * @return array<string, string>
     */
    protected function casts(): array
    {
        return [
            'email_verified_at' => 'datetime',
            'password' => 'hashed',
        ];
    }
}
------------------------------------------------------------------------

Como se trata de um sistema de pagamentos depois que o clite paga ele precisa saber se o pagamento 
foi feito com sucesso pra isso usamos um " webhook " que executa funções de call back onde o stripe
se comunica com o sistema para dar avisos por exemplo 

1 - cliente clica em comprar(stripe recebe o aviso e passa que tem uma pessoa interessada no produto)
2 - cliente faz o cadastro (stripe recebe a ção de cadastro e avisa ao sistema )
3 - cliente paga o plano o stripe recebe e avisa se deu certo ou não o pagamento 

isso acontece sem que eu precise fazer uma consulta manualmente 
 